@model Prueba_1.Models.ViewModels.MovimientoViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>ViewBag.Title</h2>

@using (Html.BeginForm("Anadir", "Movimiento", FormMethod.Post))
{
    <div class="row">
        <div class="form-group">
            @Html.LabelFor(d => d.Responsable)
            @Html.TextBoxFor(d => d.Responsable)
        </div>
        <div class="form-group">
            <input type="submit" name="name" value="Registrar" />
        </div>
        <div>
            <p class="text-success">
                @ViewBag.Message
            </p>
        </div>
    </div>

    <hr />

    <div class="form-group">
        Descripcion
        <input type="text" id="Descripcion" />
        Marca
        <input type="text" id="Marca" />
        <input type="button" value="Anadir" 
               onclick="AnadirMovimiento(); return false;"/>
    </div>


    <div id="divMovimientos">
        <table class="table">
            <tbody id="tablaMovimiento">

                <tr>
                    <th>Descripcion</th>
                    <th>Marca</th>
                </tr> 

            </tbody>
        </table>

        <!--
    <input type="hidden" name="Equipos.Index" value="0" />
    <input type="hidden" name="Equipos[0].Descripcion" value="CPU" />
    <input type="hidden" name="Equipos[0].Marca" value="HP" />

    <input type="hidden" name="Equipos.Index" value="1" />
    <input type="hidden" name="Equipos[1].Descripcion" value="MONITOR" />
    <input type="hidden" name="Equipos[1].Marca" value="LENOVO" />
        -->

        <hr />
        <table class="table">
            <tr>
                <th>[Fecha]</th>
                <th>Origen</th>
                <th>Destino</th>
                <th>Accion</th>
            </tr>
            <tr>
                <td>1998-01-01 23:59:59.000</td>
                <td>LAMPA</td>
                <td>PUNO</td>
                <td>ENTREGAR</td>
            </tr>
        </table>

        <input type="hidden" name="Movimientos.Index" value="0" />
        <input type="hidden" name="Movimientos[0].Origen" value="PUNO" />
        <input type="hidden" name="Movimientos[0].Destino" value="LAMPA" />
        <input type="hidden" name="Movimientos[0].Accion" value="ASIGNACION" /> 

    </div>

}



<script>

    var num = 0;

    function AnadirMovimiento(){
        console.log("hola");

        let Descripcion = document.getElementById("Descripcion").value;
        let Marca = document.getElementById("Marca").value;

        //agregar a la tabla movimientos
        // identificar la tabla 
        // crear tr
        // crear td
        // innterHTML de td
        // agregar tr a tabla

        let TablaMovimientos = document.getElementById("tablaMovimiento");
        let TR = document.createElement("tr");
        let TDDescripcion = document.createElement("td");
        let TDMarca = document.createElement("td");
        TDDescripcion.innerHTML = Descripcion;
        TDMarca.innerHTML = Marca;
        TR.appendChild(TDDescripcion);
        TR.appendChild(TDMarca);    
        TablaMovimientos.appendChild(TR);

    
        //agregar hiddens
        let DivMovimientos = document.getElementById("divMovimientos");
        let HiddenIndex = document.createElement("input");
        let HiddenDescripcion = document.createElement("input");
        let HiddenMarca = document.createElement("input");

        HiddenIndex.type = "hidden";
        HiddenIndex.name = "Equipos.Index";
        HiddenIndex.value = num;

        HiddenDescripcion.type = "hidden";
        HiddenDescripcion.name = "Equipos["+num+"].Descripcion";
        HiddenDescripcion.value = Descripcion;
    
        HiddenMarca.type = "hidden";
        HiddenMarca.name = "Equipos["+num+"].Marca";
        HiddenMarca.value = Marca;

        DivMovimientos.appendChild(HiddenIndex);
        DivMovimientos.appendChild(HiddenDescripcion);
        DivMovimientos.appendChild(HiddenMarca);

        document.getElementById("Descripcion").value="";
        document.getElementById("Marca").value="";
        
        num ++ ;

    }



</script>